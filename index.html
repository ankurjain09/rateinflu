<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TrustReview - Verified Influencer Reviews</title>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #4f46e5;
            --primary-light: #818cf8;
            --primary-dark: #3730a3;
            --accent: #06b6d4;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --dark: #1e293b;
            --gray: #64748b;
            --light-gray: #f1f5f9;
            --white: #ffffff;
            --shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            --shadow-lg: 0 25px 50px -12px rgba(0, 0, 0, 0.15);
            --tiktok: #000000;
            --youtube: #FF0000;
            --instagram: #E4405F;
            --twitter: #1DA1F2;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Inter', 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #f0f9ff 0%, #e0e7ff 100%);
            min-height: 100vh;
            color: var(--dark);
        }

        /* Loading State */
        .loading-spinner {
            border: 3px solid var(--light-gray);
            border-top: 3px solid var(--primary);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 2rem auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-container {
            text-align: center;
            padding: 4rem 2rem;
        }

        /* Auth Modal */
        .auth-modal {
            display: none;
            position: fixed;
            z-index: 10000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
        }

        .auth-modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .auth-content {
            background: white;
            padding: 2rem;
            border-radius: 20px;
            max-width: 400px;
            width: 90%;
            box-shadow: var(--shadow-lg);
        }

        .auth-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .auth-header h2 {
            color: var(--primary);
            margin-bottom: 0.5rem;
        }

        .auth-form {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .auth-input {
            padding: 0.75rem;
            border: 2px solid var(--light-gray);
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s;
        }

        .auth-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
        }

        .auth-btn {
            padding: 0.75rem;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .auth-btn:hover {
            background: var(--primary-dark);
        }

        .auth-divider {
            text-align: center;
            margin: 1rem 0;
            color: var(--gray);
        }

        .google-btn {
            background: white;
            color: var(--dark);
            border: 2px solid var(--light-gray);
        }

        .google-btn:hover {
            background: var(--light-gray);
        }

        .auth-switch {
            text-align: center;
            margin-top: 1rem;
            color: var(--gray);
        }

        .auth-switch a {
            color: var(--primary);
            cursor: pointer;
            text-decoration: none;
        }

        .close-modal {
            position: absolute;
            right: 1rem;
            top: 1rem;
            background: var(--light-gray);
            border: none;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
            color: var(--gray);
        }

        .error-message {
            background: #fef2f2;
            color: var(--danger);
            padding: 0.75rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            display: none;
        }

        .error-message.active {
            display: block;
        }

        /* User Profile Dropdown */
        .user-dropdown {
            position: relative;
        }

        .user-btn {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: white;
            border: 2px solid var(--light-gray);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .user-btn:hover {
            border-color: var(--primary);
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
        }

        .dropdown-menu {
            position: absolute;
            top: 100%;
            right: 0;
            margin-top: 0.5rem;
            background: white;
            border-radius: 10px;
            box-shadow: var(--shadow-lg);
            padding: 0.5rem;
            min-width: 200px;
            display: none;
        }

        .dropdown-menu.active {
            display: block;
        }

        .dropdown-item {
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .dropdown-item:hover {
            background: var(--light-gray);
        }

        /* Page Toggle Buttons for Demo */
        .demo-toggle {
            position: fixed;
            top: 80px;
            right: 20px;
            z-index: 9999;
            display: flex;
            gap: 10px;
            background: white;
            padding: 10px;
            border-radius: 10px;
            box-shadow: var(--shadow);
        }

        .demo-btn {
            padding: 8px 16px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

        .demo-btn:hover {
            background: var(--primary-dark);
        }

        .demo-btn.inactive {
            background: var(--gray);
        }

        /* Hide/Show Pages */
        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        /* Navigation */
        nav {
            background: var(--white);
            padding: 1rem 2rem;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        nav.scrolled {
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            text-decoration: none;
        }

        .logo-icon {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            align-items: center;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--gray);
            font-weight: 500;
            transition: color 0.3s;
            position: relative;
        }

        .nav-links a:hover {
            color: var(--primary);
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            padding: 0.625rem 1.5rem;
            border-radius: 10px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s;
            box-shadow: 0 4px 14px rgba(79, 70, 229, 0.3);
            cursor: pointer;
            border: none;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(79, 70, 229, 0.4);
        }

        /* Main Container */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 6rem 2rem 2rem;
        }

        /* Hero Section */
        .hero {
            text-align: center;
            margin-bottom: 3rem;
            padding: 3rem 0;
        }

        .hero h1 {
            font-size: 3.5rem;
            font-weight: 800;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            line-height: 1.2;
        }

        .hero p {
            color: var(--gray);
            font-size: 1.25rem;
            max-width: 600px;
            margin: 0 auto;
        }

        /* Trust Badges */
        .trust-indicators {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin: 2rem 0;
            flex-wrap: wrap;
        }

        .trust-indicator {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: var(--white);
            border-radius: 50px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .trust-indicator-icon {
            width: 24px;
            height: 24px;
            background: var(--success);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.875rem;
        }

        .trust-indicator span {
            font-size: 0.875rem;
            color: var(--dark);
            font-weight: 600;
        }

        /* Search and Filters */
        .search-section {
            background: var(--white);
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 3rem;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);
        }

        .search-bar {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .search-input {
            flex: 1;
            padding: 1rem 1.5rem;
            border: 2px solid var(--light-gray);
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.3s;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
        }

        .search-btn {
            padding: 1rem 2rem;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .search-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        /* Category Pills */
        .categories {
            display: flex;
            gap: 0.75rem;
            flex-wrap: wrap;
        }

        .category-pill {
            padding: 0.5rem 1.25rem;
            background: var(--light-gray);
            border: 2px solid transparent;
            border-radius: 50px;
            color: var(--gray);
            font-size: 0.875rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .category-pill:hover {
            background: var(--white);
            border-color: var(--primary);
            color: var(--primary);
            transform: translateY(-2px);
        }

        .category-pill.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        /* Cards Grid */
        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
            gap: 2rem;
            margin-bottom: 4rem;
        }

        /* Influencer Card */
        .influencer-card {
            background: var(--white);
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
        }

        .influencer-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
        }

        /* Card Header */
        .card-header {
            padding: 1.5rem;
            background: linear-gradient(135deg, #f0f9ff 0%, #e0e7ff 50%, #fce7f3 100%);
            position: relative;
        }

        .card-profile {
            display: flex;
            gap: 1rem;
            align-items: flex-start;
        }

        .profile-image {
            width: 70px;
            height: 70px;
            border-radius: 16px;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            font-weight: bold;
            position: relative;
            box-shadow: 0 8px 16px rgba(79, 70, 229, 0.3);
        }

        .verified-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--success);
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            border: 3px solid white;
            box-shadow: 0 2px 8px rgba(16, 185, 129, 0.4);
        }

        .profile-info {
            flex: 1;
        }

        .influencer-name {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 0.25rem;
        }

        .influencer-niche {
            display: inline-block;
            background: var(--primary);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 6px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        /* Social Platforms */
        .social-platforms {
            display: flex;
            gap: 0.75rem;
            flex-wrap: wrap;
        }

        .platform-badge {
            display: flex;
            align-items: center;
            gap: 0.25rem;
            padding: 0.25rem 0.5rem;
            background: var(--light-gray);
            border-radius: 6px;
            font-size: 0.75rem;
            color: var(--dark);
            font-weight: 600;
        }

        .platform-icon {
            width: 16px;
            height: 16px;
            border-radius: 3px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.625rem;
            color: white;
        }

        .platform-icon.tiktok {
            background: var(--tiktok);
        }

        .platform-icon.youtube {
            background: var(--youtube);
        }

        .platform-icon.instagram {
            background: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%);
        }

        .platform-icon.twitter {
            background: var(--twitter);
        }

        /* Trust Badge */
        .trust-badge {
            position: absolute;
            top: 1rem;
            right: 1rem;
            padding: 0.375rem 0.75rem;
            border-radius: 8px;
            font-size: 0.75rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .trust-high {
            background: var(--success);
            color: white;
        }

        .trust-medium {
            background: var(--warning);
            color: white;
        }

        .trust-low {
            background: var(--danger);
            color: white;
        }

        /* Stats Section */
        .stats-section {
            padding: 1.5rem;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            background: var(--light-gray);
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
        }

        .stat-label {
            font-size: 0.75rem;
            color: var(--gray);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-top: 0.25rem;
        }

        /* Services Preview */
        .services-preview {
            padding: 1.5rem;
            border-top: 1px solid var(--light-gray);
        }

        .services-title {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--gray);
            margin-bottom: 1rem;
        }

        .service-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .service-tag {
            padding: 0.375rem 0.75rem;
            background: var(--light-gray);
            border-radius: 8px;
            font-size: 0.75rem;
            color: var(--dark);
            font-weight: 500;
        }

        .service-price {
            color: var(--success);
            font-weight: 700;
        }

        /* Review Snippet */
        .review-snippet {
            padding: 1.5rem;
            background: linear-gradient(135deg, #f0f9ff 0%, #fef3c7 100%);
        }

        .review-stars {
            display: flex;
            gap: 0.125rem;
            margin-bottom: 0.5rem;
        }

        .star {
            color: #fbbf24;
            font-size: 1rem;
        }

        .review-text {
            font-size: 0.875rem;
            color: var(--dark);
            line-height: 1.5;
            margin-bottom: 0.5rem;
        }

        .review-author {
            font-size: 0.75rem;
            color: var(--gray);
        }

        /* View Profile Button */
        .card-action {
            padding: 1rem 1.5rem;
            background: var(--primary);
            color: white;
            text-align: center;
            font-weight: 600;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .card-action:hover {
            background: var(--primary-dark);
        }

        .arrow-icon {
            transition: transform 0.3s;
        }

        .influencer-card:hover .arrow-icon {
            transform: translateX(5px);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2.5rem;
            }

            .cards-grid {
                grid-template-columns: 1fr;
            }

            .nav-links {
                display: none;
            }

            .demo-toggle {
                top: auto;
                bottom: 20px;
            }
        }
    </style>
</head>
<body>
    <!-- Auth Modal -->
    <div id="authModal" class="auth-modal">
        <div class="auth-content">
            <button class="close-modal" onclick="closeAuthModal()">√ó</button>
            <div class="auth-header">
                <h2 id="authTitle">Sign In</h2>
                <p id="authSubtitle">Access your account to write reviews</p>
            </div>
            
            <div id="errorMessage" class="error-message"></div>
            
            <form id="authForm" class="auth-form">
                <input type="email" id="emailInput" class="auth-input" placeholder="Email" required>
                <input type="password" id="passwordInput" class="auth-input" placeholder="Password" required>
                <input type="text" id="nameInput" class="auth-input" placeholder="Full Name" style="display: none;">
                <button type="submit" class="auth-btn" id="authSubmitBtn">Sign In</button>
            </form>
            
            <div class="auth-divider">OR</div>
            
            <button onclick="signInWithGoogle()" class="auth-btn google-btn">
                Continue with Google
            </button>
            
            <div class="auth-switch">
                <span id="authSwitchText">Don't have an account?</span>
                <a id="authSwitchLink" onclick="toggleAuthMode()">Sign Up</a>
            </div>
        </div>
    </div>

    <!-- Demo Toggle Buttons -->
    <div class="demo-toggle">
        <button class="demo-btn" onclick="showPage('home')">Home Page</button>
        <button class="demo-btn inactive" onclick="showPage('profile')">Profile Page</button>
    </div>

    <!-- HOME PAGE -->
    <div id="home-page" class="page active">
        <!-- Navigation -->
        <nav id="navbar">
            <div class="nav-container">
                <a href="#" class="logo" onclick="showPage('home')">
                    <div class="logo-icon">‚úì</div>
                    <span>TrustReview</span>
                </a>
                <div class="nav-links">
                    <a href="#">Browse</a>
                    <a href="#">Categories</a>
                    <a href="#">Top Rated</a>
                    <a href="#">How It Works</a>
                    <div id="authContainer">
                        <!-- Will be populated dynamically -->
                    </div>
                </div>
            </div>
        </nav>

        <!-- Main Container -->
        <div class="container">
            <!-- Hero Section -->
            <div class="hero">
                <h1>Find Trusted Influencer Services</h1>
                <p>Community-verified reviews for courses, bootcamps, and coaching programs</p>
                
                <div class="trust-indicators">
                    <div class="trust-indicator">
                        <div class="trust-indicator-icon">‚úì</div>
                        <span id="totalReviews">12,847 Verified Reviews</span>
                    </div>
                    <div class="trust-indicator">
                        <div class="trust-indicator-icon">üõ°Ô∏è</div>
                        <span>Scam Protection</span>
                    </div>
                    <div class="trust-indicator">
                        <div class="trust-indicator-icon">üë•</div>
                        <span>Real User Feedback</span>
                    </div>
                </div>
            </div>

            <!-- Search and Filters -->
            <div class="search-section">
                <div class="search-bar">
                    <input type="text" id="searchInput" class="search-input" placeholder="Search influencers, courses, or services...">
                    <button class="search-btn" onclick="searchInfluencers()">Search</button>
                </div>
                
                <div class="categories" id="categoriesContainer">
                    <div class="category-pill active" data-category="all">All Categories</div>
                    <div class="category-pill" data-category="fitness">üí™ Fitness</div>
                    <div class="category-pill" data-category="trading">üí∞ Trading</div>
                    <div class="category-pill" data-category="real-estate">üè† Real Estate</div>
                    <div class="category-pill" data-category="beauty">üíÑ Beauty</div>
                    <div class="category-pill" data-category="tech">üíª Tech</div>
                    <div class="category-pill" data-category="education">üìö Education</div>
                    <div class="category-pill" data-category="marketing">üéØ Marketing</div>
                    <div class="category-pill" data-category="wellness">üßò Wellness</div>
                </div>
            </div>

            <!-- Cards Grid -->
            <div class="cards-grid" id="influencersGrid">
                <!-- Will be populated dynamically from Firestore -->
                <div class="loading-container">
                    <div class="loading-spinner"></div>
                    <p>Loading influencers...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Firebase SDKs -->
    <script type="module">
        // Import Firebase modules
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { 
            getAuth, 
            signInWithEmailAndPassword,
            createUserWithEmailAndPassword,
            signInWithPopup,
            GoogleAuthProvider,
            onAuthStateChanged,
            signOut,
            updateProfile
        } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
        import { 
            getFirestore,
            collection,
            getDocs,
            query,
            where,
            orderBy,
            limit,
            addDoc,
            doc,
            getDoc,
            setDoc,
            updateDoc,
            serverTimestamp
        } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

        // Your Firebase configuration
		const firebaseConfig = {
		  apiKey: "AIzaSyAjYOUXAU1FusccFJQcsEWmo8W9CgSSmfA",
		  authDomain: "rateinflu.firebaseapp.com",
		  projectId: "rateinflu",
		  storageBucket: "rateinflu.firebasestorage.app",
		  messagingSenderId: "619786232167",
		  appId: "1:619786232167:web:eca2e76803201421eccfc2",
		  measurementId: "G-WPDZMZHMCW"
		};

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const googleProvider = new GoogleAuthProvider();

        // Global variables
        let currentUser = null;
        let isSignUp = false;
        let influencersData = [];
        let selectedCategory = 'all';

        // Make functions global
        window.openAuthModal = openAuthModal;
        window.closeAuthModal = closeAuthModal;
        window.toggleAuthMode = toggleAuthMode;
        window.signInWithGoogle = signInWithGoogle;
        window.signOutUser = signOutUser;
        window.showPage = showPage;
        window.searchInfluencers = searchInfluencers;
        window.loadInfluencerProfile = loadInfluencerProfile;

        // Auth State Observer
        onAuthStateChanged(auth, (user) => {
            currentUser = user;
            updateAuthUI();
            if (user) {
                console.log('User signed in:', user.email);
            } else {
                console.log('User signed out');
            }
        });

        // Update Auth UI
        function updateAuthUI() {
            const authContainer = document.getElementById('authContainer');
            
            if (currentUser) {
                const userInitial = currentUser.displayName ? 
                    currentUser.displayName.charAt(0).toUpperCase() : 
                    currentUser.email.charAt(0).toUpperCase();
                
                authContainer.innerHTML = `
                    <div class="user-dropdown">
                        <button class="user-btn" onclick="toggleDropdown()">
                            <div class="user-avatar">${userInitial}</div>
                            <span>${currentUser.displayName || currentUser.email}</span>
                        </button>
                        <div id="dropdownMenu" class="dropdown-menu">
                            <div class="dropdown-item">My Reviews</div>
                            <div class="dropdown-item">Settings</div>
                            <div class="dropdown-item" onclick="signOutUser()">Sign Out</div>
                        </div>
                    </div>
                `;
            } else {
                authContainer.innerHTML = `
                    <button class="btn-primary" onclick="openAuthModal()">Submit Review</button>
                `;
            }
        }

        // Toggle dropdown
        window.toggleDropdown = function() {
            const dropdown = document.getElementById('dropdownMenu');
            dropdown.classList.toggle('active');
        }

        // Auth Modal Functions
        function openAuthModal() {
            document.getElementById('authModal').classList.add('active');
        }

        function closeAuthModal() {
            document.getElementById('authModal').classList.remove('active');
            document.getElementById('errorMessage').classList.remove('active');
        }

        function toggleAuthMode() {
            isSignUp = !isSignUp;
            const title = document.getElementById('authTitle');
            const subtitle = document.getElementById('authSubtitle');
            const submitBtn = document.getElementById('authSubmitBtn');
            const nameInput = document.getElementById('nameInput');
            const switchText = document.getElementById('authSwitchText');
            const switchLink = document.getElementById('authSwitchLink');
            
            if (isSignUp) {
                title.textContent = 'Sign Up';
                subtitle.textContent = 'Create an account to write reviews';
                submitBtn.textContent = 'Sign Up';
                nameInput.style.display = 'block';
                nameInput.required = true;
                switchText.textContent = 'Already have an account?';
                switchLink.textContent = 'Sign In';
            } else {
                title.textContent = 'Sign In';
                subtitle.textContent = 'Access your account to write reviews';
                submitBtn.textContent = 'Sign In';
                nameInput.style.display = 'none';
                nameInput.required = false;
                switchText.textContent = "Don't have an account?";
                switchLink.textContent = 'Sign Up';
            }
        }

        // Handle Auth Form Submit
        document.getElementById('authForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const email = document.getElementById('emailInput').value;
            const password = document.getElementById('passwordInput').value;
            const name = document.getElementById('nameInput').value;
            const errorMsg = document.getElementById('errorMessage');
            
            try {
                let userCredential;
                
                if (isSignUp) {
                    // Sign Up
                    userCredential = await createUserWithEmailAndPassword(auth, email, password);
                    
                    // Update profile with name
                    if (name) {
                        await updateProfile(userCredential.user, {
                            displayName: name
                        });
                    }
                    
                    // Create user document in Firestore
                    await setDoc(doc(db, 'users', userCredential.user.uid), {
                        displayName: name,
                        email: email,
                        createdAt: serverTimestamp(),
                        reviewsWritten: 0
                    });
                } else {
                    // Sign In
                    userCredential = await signInWithEmailAndPassword(auth, email, password);
                }
                
                closeAuthModal();
                document.getElementById('authForm').reset();
                
            } catch (error) {
                errorMsg.textContent = error.message;
                errorMsg.classList.add('active');
            }
        });

        // Google Sign In
        async function signInWithGoogle() {
            try {
                const result = await signInWithPopup(auth, googleProvider);
                const user = result.user;
                
                // Check if user document exists, if not create it
                const userDoc = await getDoc(doc(db, 'users', user.uid));
                if (!userDoc.exists()) {
                    await setDoc(doc(db, 'users', user.uid), {
                        displayName: user.displayName,
                        email: user.email,
                        createdAt: serverTimestamp(),
                        reviewsWritten: 0
                    });
                }
                
                closeAuthModal();
            } catch (error) {
                const errorMsg = document.getElementById('errorMessage');
                errorMsg.textContent = error.message;
                errorMsg.classList.add('active');
            }
        }

        // Sign Out
        async function signOutUser() {
            try {
                await signOut(auth);
                console.log('User signed out successfully');
            } catch (error) {
                console.error('Error signing out:', error);
            }
        }

        // Load Influencers from Firestore
        async function loadInfluencers() {
            const grid = document.getElementById('influencersGrid');
            
            try {
                // Get influencers from Firestore
                const q = query(collection(db, 'influencers'), orderBy('stats.rating', 'desc'));
                const querySnapshot = await getDocs(q);
                
                influencersData = [];
                querySnapshot.forEach((doc) => {
                    influencersData.push({ id: doc.id, ...doc.data() });
                });
                
                // If no data in Firestore, use sample data
                if (influencersData.length === 0) {
                    influencersData = getSampleInfluencers();
                    // Optionally, seed Firestore with sample data
                    await seedFirestore();
                }
                
                displayInfluencers(influencersData);
                
            } catch (error) {
                console.error('Error loading influencers:', error);
                // Use sample data as fallback
                influencersData = getSampleInfluencers();
                displayInfluencers(influencersData);
            }
        }

        // Display Influencers
        function displayInfluencers(influencers) {
            const grid = document.getElementById('influencersGrid');
            
            if (influencers.length === 0) {
                grid.innerHTML = '<p>No influencers found.</p>';
                return;
            }
            
            grid.innerHTML = influencers.map(influencer => createInfluencerCard(influencer)).join('');
        }

        // Create Influencer Card HTML
        function createInfluencerCard(influencer) {
            const initials = influencer.name.split(' ').map(n => n[0]).join('');
            const trustClass = influencer.trustScore > 80 ? 'trust-high' : 
                              influencer.trustScore > 50 ? 'trust-medium' : 'trust-low';
            const trustLabel = influencer.trustScore > 80 ? '‚úì Trusted' :
                              influencer.trustScore > 50 ? '‚ö° Mixed' : '‚ö†Ô∏è Caution';
            
            return `
                <div class="influencer-card" onclick="loadInfluencerProfile('${influencer.id}')">
                    <div class="trust-badge ${trustClass}">${trustLabel}</div>
                    <div class="card-header">
                        <div class="card-profile">
                            <div class="profile-image">
                                ${initials}
                                ${influencer.verified ? '<div class="verified-badge">‚úì</div>' : ''}
                            </div>
                            <div class="profile-info">
                                <div class="influencer-name">${influencer.name}</div>
                                <div class="influencer-niche">${influencer.niche}</div>
                                <div class="social-platforms">
                                    ${Object.entries(influencer.socialPlatforms || {}).map(([platform, followers]) => `
                                        <div class="platform-badge">
                                            <div class="platform-icon ${platform}">${getPlatformIcon(platform)}</div>
                                            <span>${formatFollowers(followers)}</span>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="stats-section">
                        <div class="stat-item">
                            <div class="stat-value">${influencer.stats?.rating || 0}</div>
                            <div class="stat-label">Rating</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">${formatNumber(influencer.stats?.reviewCount || 0)}</div>
                            <div class="stat-label">Reviews</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">${influencer.stats?.recommendPercent || 0}%</div>
                            <div class="stat-label">Recommend</div>
                        </div>
                    </div>

                    <div class="services-preview">
                        <div class="services-title">Popular Services</div>
                        <div class="service-tags">
                            ${(influencer.services || []).slice(0, 3).map(service => `
                                <div class="service-tag">${service.title} ‚Ä¢ <span class="service-price">$${service.price}</span></div>
                            `).join('')}
                        </div>
                    </div>

                    ${influencer.latestReview ? `
                        <div class="review-snippet">
                            <div class="review-stars">
                                ${generateStars(influencer.latestReview.rating)}
                            </div>
                            <div class="review-text">
                                "${influencer.latestReview.text}"
                            </div>
                            <div class="review-author">- ${influencer.latestReview.author}, ${influencer.latestReview.date}</div>
                        </div>
                    ` : ''}

                    <div class="card-action">
                        View Full Profile
                        <span class="arrow-icon">‚Üí</span>
                    </div>
                </div>
            `;
        }

        // Helper Functions
        function getPlatformIcon(platform) {
            const icons = {
                instagram: 'IG',
                youtube: 'YT',
                tiktok: 'TT',
                twitter: 'X'
            };
            return icons[platform] || platform.substring(0, 2).toUpperCase();
        }

        function formatFollowers(count) {
            if (count >= 1000000) return (count / 1000000).toFixed(1) + 'M';
            if (count >= 1000) return (count / 1000).toFixed(0) + 'K';
            return count.toString();
        }

        function formatNumber(num) {
            if (num >= 1000) return (num / 1000).toFixed(1) + 'k';
            return num.toString();
        }

        function generateStars(rating) {
            let stars = '';
            for (let i = 1; i <= 5; i++) {
                stars += `<span class="star" ${i > rating ? 'style="color: #e5e7eb;"' : ''}>‚òÖ</span>`;
            }
            return stars;
        }

        // Sample Data
        function getSampleInfluencers() {
            return [
                {
                    id: 'jake-davis-1',
                    name: 'Jake Davis',
                    niche: 'Fitness Coach',
                    avatar: 'JD',
                    verified: true,
                    trustScore: 94,
                    socialPlatforms: {
                        instagram: 850000,
                        youtube: 320000,
                        tiktok: 1200000
                    },
                    stats: {
                        rating: 4.8,
                        reviewCount: 1247,
                        recommendPercent: 94
                    },
                    services: [
                        { title: '30-Day Bootcamp', price: 297 },
                        { title: '1-on-1 Coaching', price: '150/mo' },
                        { title: 'Nutrition Guide', price: 47 }
                    ],
                    latestReview: {
                        rating: 5,
                        text: 'Life-changing program! Lost 20 pounds and gained confidence. Jake\'s support is incredible...',
                        author: 'Sarah M.',
                        date: '2 days ago'
                    }
                },
                {
                    id: 'alex-kumar-1',
                    name: 'Alex Kumar',
                    niche: 'Web Developer',
                    avatar: 'AK',
                    verified: true,
                    trustScore: 97,
                    socialPlatforms: {
                        youtube: 850000,
                        twitter: 125000
                    },
                    stats: {
                        rating: 4.9,
                        reviewCount: 2400,
                        recommendPercent: 97
                    },
                    services: [
                        { title: 'Full-Stack Bootcamp', price: 497 },
                        { title: 'React Course', price: 197 }
                    ],
                    latestReview: {
                        rating: 5,
                        text: 'Got hired at Google after completing Alex\'s bootcamp. Worth every penny!',
                        author: 'Michael R.',
                        date: '1 week ago'
                    }
                },
                {
                    id: 'sarah-mitchell-1',
                    name: 'Sarah Mitchell',
                    niche: 'Real Estate',
                    avatar: 'SM',
                    verified: false,
                    trustScore: 58,
                    socialPlatforms: {
                        instagram: 450000
                    },
                    stats: {
                        rating: 3.2,
                        reviewCount: 432,
                        recommendPercent: 58
                    },
                    services: [
                        { title: 'Wholesaling Course', price: 997 }
                    ],
                    latestReview: {
                        rating: 3,
                        text: 'Content is okay but overpriced. Most info is available free...',
                        author: 'Tom D.',
                        date: '1 week ago'
                    }
                }
            ];
        }

        // Seed Firestore with sample data
        async function seedFirestore() {
            const sampleData = getSampleInfluencers();
            
            for (const influencer of sampleData) {
                try {
                    await setDoc(doc(db, 'influencers', influencer.id), {
                        ...influencer,
                        createdAt: serverTimestamp()
                    });
                } catch (error) {
                    console.error('Error seeding influencer:', error);
                }
            }
            
            console.log('Sample data seeded to Firestore');
        }

        // Search Influencers
        function searchInfluencers() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            
            const filtered = influencersData.filter(influencer => 
                influencer.name.toLowerCase().includes(searchTerm) ||
                influencer.niche.toLowerCase().includes(searchTerm) ||
                (influencer.services && influencer.services.some(s => 
                    s.title.toLowerCase().includes(searchTerm)
                ))
            );
            
            displayInfluencers(filtered);
        }

        // Category Filter
        document.getElementById('categoriesContainer').addEventListener('click', (e) => {
            if (e.target.classList.contains('category-pill')) {
                // Update active state
                document.querySelectorAll('.category-pill').forEach(pill => {
                    pill.classList.remove('active');
                });
                e.target.classList.add('active');
                
                // Filter influencers
                selectedCategory = e.target.dataset.category;
                
                if (selectedCategory === 'all') {
                    displayInfluencers(influencersData);
                } else {
                    const filtered = influencersData.filter(influencer => 
                        influencer.niche.toLowerCase().includes(selectedCategory.replace('-', ' '))
                    );
                    displayInfluencers(filtered);
                }
            }
        });

        // Load Influencer Profile
        async function loadInfluencerProfile(influencerId) {
            // This would navigate to the profile page or load profile data
            console.log('Loading profile for:', influencerId);
            // For now, just show the profile page
            showPage('profile');
        }

        // Page Navigation
        function showPage(page) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            
            if (page === 'home') {
                document.getElementById('home-page').classList.add('active');
                document.querySelectorAll('.demo-btn')[0].classList.remove('inactive');
                document.querySelectorAll('.demo-btn')[1].classList.add('inactive');
            } else if (page === 'profile') {
                // Would load actual profile data here
                alert('Profile page would load here with data from Firestore');
                window.scrollTo(0, 0);
            }
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', () => {
            loadInfluencers();
        });

        // Navbar scroll effect
        window.addEventListener('scroll', function() {
            const navbar = document.querySelector('nav');
            if (window.scrollY > 50) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }
        });

        // Close dropdown when clicking outside
        document.addEventListener('click', (e) => {
            if (!e.target.closest('.user-dropdown')) {
                const dropdown = document.getElementById('dropdownMenu');
                if (dropdown) {
                    dropdown.classList.remove('active');
                }
            }
        });
    </script>
</body>
</html>